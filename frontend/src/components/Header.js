import React, { useEffect, useRef, useState } from 'react';

export default function Header() {
  const rectangleRef = useRef(null);
  const angRef = useRef(null);
  const phonenumbRef = useRef(null);
  const logoRef = useRef(null);
  const [isVisible, setIsVisible] = useState(false);
  const [isBlack, setIsBlack] = useState(false);
  
  useEffect(() => {
    const handleScroll = () => {
      const scrollPosition = window.scrollY;
      if (scrollPosition > 764) {
        setIsVisible(true);
        setIsBlack(true);
      } else {
        setIsVisible(false);
        setIsBlack(false);
      }
    };

    window.addEventListener('scroll', handleScroll);

    // Убираем обработчик событий при размонтировании компонента
    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []);

  return (
    <header>
      <div className='headerwrapper'>
        <div className={`headerrectangle ${isVisible ? 'visible' : ''}`} ref={rectangleRef}>
          <div className='rectangle'></div>      
        </div>
          <div className='presentation'>
            <div className={`ang ${isVisible ? 'visible' : ''}`} ref={angRef}>
              <div className='locationicon'>
                <a href="https://2gis.ru/angarsk/firm/70000001029237801/103.834694%2C52.502292?m=103.834835%2C52.502191%2F19.33">Ангарск</a>
              </div>
            </div>
              <div className='phonenumb'>
                <p>
                  <a href='tel:79996403787' className={`custom-link ${isVisible ? 'visible' : ''}`} ref={phonenumbRef}>+7 (999) 640-37-87</a>
                </p>
              </div>
              <div className='iconloc'>
                <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 20 20" fill="none">
                  <path d="M11.6986 16.354L11.1084 15.8912L11.6986 16.354ZM7.72703 16.354L7.13686 16.8168L7.72703 16.354ZM9.7128 18V17.25V18ZM14.6756 9.14747C14.6756 9.96409 14.2439 11.0945 13.5278 12.3606C12.8283 13.5973 11.9218 14.8539 11.1084 15.8912L12.2887 16.8168C13.1247 15.7508 14.0818 14.4279 14.8334 13.0991C15.5684 11.7996 16.1756 10.3783 16.1756 9.14747H14.6756ZM8.31721 15.8912C7.50379 14.8539 6.59733 13.5973 5.8978 12.3606C5.18167 11.0945 4.75 9.96409 4.75 9.14747H3.25C3.25 10.3783 3.85715 11.7996 4.59219 13.0991C5.34382 14.4279 6.30088 15.7508 7.13686 16.8168L8.31721 15.8912ZM4.75 9.14747C4.75 6.11378 7.02277 3.75 9.7128 3.75V2.25C6.09265 2.25 3.25 5.39084 3.25 9.14747H4.75ZM9.7128 3.75C12.4028 3.75 14.6756 6.11378 14.6756 9.14747H16.1756C16.1756 5.39084 13.3329 2.25 9.7128 2.25V3.75ZM11.1084 15.8912C10.6617 16.4608 10.3833 16.8117 10.1393 17.0333C9.9274 17.2259 9.81785 17.25 9.7128 17.25V18.75C10.3027 18.75 10.7558 18.4998 11.1479 18.1437C11.5079 17.8167 11.8749 17.3445 12.2887 16.8168L11.1084 15.8912ZM7.13686 16.8168C7.55068 17.3445 7.91773 17.8167 8.2777 18.1437C8.66979 18.4998 9.12286 18.75 9.7128 18.75V17.25C9.60774 17.25 9.4982 17.2259 9.28628 17.0333C9.04224 16.8117 8.76391 16.4608 8.31721 15.8912L7.13686 16.8168ZM6.8205 9.4269C6.8205 11.0243 8.11542 12.3192 9.7128 12.3192V10.8192C8.94385 10.8192 8.3205 10.1958 8.3205 9.4269H6.8205ZM9.7128 12.3192C11.3102 12.3192 12.6051 11.0243 12.6051 9.4269H11.1051C11.1051 10.1958 10.4817 10.8192 9.7128 10.8192V12.3192ZM12.6051 9.4269C12.6051 7.82952 11.3102 6.5346 9.7128 6.5346V8.0346C10.4817 8.0346 11.1051 8.65795 11.1051 9.4269H12.6051ZM9.7128 6.5346C8.11542 6.5346 6.8205 7.82952 6.8205 9.4269H8.3205C8.3205 8.65795 8.94385 8.0346 9.7128 8.0346V6.5346Z" fill={isBlack ? 'black' : 'white'}/>
                </svg>
              </div>
              <div class='menu'>
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="18" viewBox="0 0 21 18" fill="none">
                <path d="M1 0C0.447715 0 0 0.447715 0 1C0 1.55228 0.447715 2 1 2H19.6667C20.219 2 20.6667 1.55228 20.6667 1C20.6667 0.447715 20.219 0 19.6667 0H1Z" fill={isBlack ? 'black' : 'white'}/>
                <path d="M1 8C0.447715 8 0 8.44772 0 9C0 9.55229 0.447715 10 1 10H19.6667C20.219 10 20.6667 9.55229 20.6667 9C20.6667 8.44772 20.219 8 19.6667 8H1Z" fill={isBlack ? 'black' : 'white'}/>
                <path d="M1 16C0.447715 16 0 16.4477 0 17C0 17.5523 0.447715 18 1 18H19.6667C20.219 18 20.6667 17.5523 20.6667 17C20.6667 16.4477 20.219 16 19.6667 16H1Z" fill={isBlack ? 'black' : 'white'}/>
                </svg>
              </div>
              <div className={`headerrectangle2 ${isVisible ? 'visible' : ''}`} ref={rectangleRef}>
                <div className='rectangle'></div>
              </div>
              <div className='searchicon'>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 18 18" fill="none">
                <path d="M14.4827 13.4221C14.1898 13.1292 13.715 13.1292 13.4221 13.4221C13.1292 13.715 13.1292 14.1899 13.4221 14.4828L14.4827 13.4221ZM16.4696 17.5303C16.7625 17.8232 17.2374 17.8232 17.5303 17.5303C17.8232 17.2374 17.8232 16.7626 17.5303 16.4697L16.4696 17.5303ZM13.4221 14.4828L16.4696 17.5303L17.5303 16.4697L14.4827 13.4221L13.4221 14.4828ZM7.85713 13.9643C4.48426 13.9643 1.75 11.23 1.75 7.85713H0.25C0.25 12.0584 3.65583 15.4643 7.85713 15.4643V13.9643ZM13.9643 7.85713C13.9643 11.23 11.23 13.9643 7.85713 13.9643V15.4643C12.0584 15.4643 15.4643 12.0584 15.4643 7.85713H13.9643ZM7.85713 1.75C11.23 1.75 13.9643 4.48426 13.9643 7.85713H15.4643C15.4643 3.65583 12.0584 0.25 7.85713 0.25V1.75ZM7.85713 0.25C3.65583 0.25 0.25 3.65583 0.25 7.85713H1.75C1.75 4.48426 4.48426 1.75 7.85713 1.75V0.25Z" fill={isBlack ? 'black' : 'white'}/>
                </svg>
              </div>
              <div className='shopicon'>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M15.7874 7.80952H8.16836M15.7874 7.80952H16.7845C18.3736 7.80952 19.1682 7.80952 19.6225 8.31707C20.0767 8.82462 19.989 9.61431 19.8135 11.1937L19.5881 13.2223C19.2299 16.4462 19.0508 18.0581 17.966 19.0291C16.8812 20 15.2468 20 11.9779 20C8.70901 20 7.07457 20 5.98977 19.0291C4.90497 18.0581 4.72587 16.4462 4.36766 13.2223L4.14226 11.1937C3.96677 9.61431 3.87903 8.82462 4.33331 8.31707C4.78758 7.80952 5.58214 7.80952 7.17124 7.80952H8.16836M15.7874 7.80952C15.7874 5.70558 14.0818 4 11.9779 4C9.92589 4 8.25283 5.62239 8.17146 7.65441C8.1694 7.70586 8.16836 7.75757 8.16836 7.80952" stroke={isBlack ? 'black' : 'white'} stroke-width="1.5"/>
                <path d="M16.5491 10.8571C16.5491 11.2779 16.208 11.619 15.7872 11.619C15.3664 11.619 15.0253 11.2779 15.0253 10.8571C15.0253 10.4363 15.3664 10.0952 15.7872 10.0952C16.208 10.0952 16.5491 10.4363 16.5491 10.8571Z" fill={isBlack ? 'black' : 'white'}/>
                <path d="M8.93006 10.8571C8.93006 11.2779 8.58894 11.619 8.16815 11.619C7.74737 11.619 7.40625 11.2779 7.40625 10.8571C7.40625 10.4363 7.74737 10.0952 8.16815 10.0952C8.58894 10.0952 8.93006 10.4363 8.93006 10.8571Z" fill={isBlack ? 'black' : 'white'}/>
                </svg>
              </div>
              <div className='lkicon'>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C9.37665 1.25 7.25 3.37665 7.25 6C7.25 8.62335 9.37665 10.75 12 10.75C14.6234 10.75 16.75 8.62335 16.75 6C16.75 3.37665 14.6234 1.25 12 1.25ZM8.75 6C8.75 4.20507 10.2051 2.75 12 2.75C13.7949 2.75 15.25 4.20507 15.25 6C15.25 7.79493 13.7949 9.25 12 9.25C10.2051 9.25 8.75 7.79493 8.75 6Z" fill={isBlack ? 'black' : 'white'}/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9 12.25C6.37665 12.25 4.25 14.3766 4.25 17C4.25 19.6234 6.37665 21.75 9 21.75H15C17.6234 21.75 19.75 19.6234 19.75 17C19.75 14.3766 17.6234 12.25 15 12.25H9ZM5.75 17C5.75 15.2051 7.20507 13.75 9 13.75H15C16.7949 13.75 18.25 15.2051 18.25 17C18.25 18.7949 16.7949 20.25 15 20.25H9C7.20507 20.25 5.75 18.7949 5.75 17Z" fill={isBlack ? 'black' : 'white'}/>
                </svg>
              </div>
              <div className={`logo ${isVisible ? 'visible' : ''}`} ref={logoRef}></div>
          </div>
      </div>
    </header>
  );
}
